<div class="h-100 w-100 d-flex flex-column">
  <div class="modal-body d-flex flex-column u-flex-grow">
    <div class="alert alert-danger animate-fade flex-shrink-0" ng-if="addData.showServerAlert">
      <button class="close" type="button" ng-click="addData.dismissServerAlert()">
        <i class="fa fa-times"></i>
      </button>
      <span>
        Some servers failed to load and their layers will not be available. See the
        <span class="important-link" ng-click="openAlerts()">alerts</span> or
        <span class="important-link" ng-click="openServers()">servers</span>
        windows for details.
      </span>
    </div>

    <div class="flex-shrink-0">
      <div class="pull-left">
        <div class="input-group mb-1">
          <input class="form-control js-input-search" ng-model="addData.term" ng-change="addData.search()" placeholder="Search available layers"></input>
          <div class="input-group-append">
            <button class="btn btn-outline-secondary" ng-click="addData.clearSearch()" title="Clear the search term">
              <i class="fa fa-times"></i>
            </button>
          </div>
        </div>

        <div class="form-row align-items-center" ng-hide="filterName">
          <div class="col-auto">
            Group By:
          </div>
          <div class="col">
            <select class="custom-select" ng-model="addData.view" ng-change="addData.onGroupByChanged()" ng-options="key for (key, value) in addData.views"/>
          </div>
        </div>

        <div class="adw-filter" ng-show="filterName">
          <span ng-click="addData.clearFilter()" class="c--action"><i class="fa fa-times text-danger"></i> Clear Filter: <em>{{filterName}}</em></span>
        </div>
      </div>

      <div class="float-right">
        <button class="btn btn-primary" ng-click="addData.launchFileImport()" title="Open a local file or URL" ng-class="{'focus': addData.isTreeEmpty()}">
          <i class="fa fa-folder-open"></i> Open File/URL
        </button>
      </div>
    </div>

    <div class="d-flex u-flex-grow mt-1">
      <slicktree class="border u-flex-grow" x-data="providers" checkbox-class="c-toggle-switch" checkbox-tooltip="Activates or deactivates the layer"
          selected="selected" disable-folders="true"></slicktree>
      <div class="border u-flex-grow ml-1 p-2" ng-bind-html="addData.getInfo()"></div>
    </div>
  </div>

  <div class="modal-footer">
    <button class="btn btn-info" ng-click="openServers()" title="Add, edit, and remove servers providing data to the application">
      <i class="fa fa-database"></i> Manage Servers
    </button>
    <div class="float-right">
      <button class="btn btn-secondary" ng-click="addData.close()"><i class="fa fa-times"></i> Close</button>
    </div>
  </div>
</div>
